---
type: inbox
aliases:
- COLMAP XMP 비교
- 카메라 파라미터 형식 비교
tags: [draft]
created: 2026-01-13 14:45
updated:
---

## COLMAP vs XMP

[[RealityScan]]에서 카메라 파라미터를 내보낼 때 사용하는 두 형식 비교.

### 핵심 개념

2D→3D 좌표 변환, [[NeRF]], [[3DGS]] 등 후속 작업에 카메라 파라미터가 필요할 때 어떤 형식을 선택할지 결정하는 가이드.

### 비교표

| 항목 | COLMAP | XMP |
|------|--------|-----|
| **Undistorted 이미지** | ✅ 자동 생성 | ❌ 없음 (직접 보정) |
| **초점거리 단위** | 픽셀 (바로 사용) | 35mm 환산 (변환 필요) |
| **이미지 해상도** | ✅ 포함 | ❌ 없음 (별도 확인) |
| **파싱 난이도** | 쉬움 (`pycolmap`) | XML 파싱 필요 |
| **왜곡 처리** | 이미 보정됨 | 직접 보정해야 함 |
| **표준성** | NeRF/3DGS 표준 | RealityScan 전용 |
| **파일 구조** | 폴더 (cameras, images, points3D) | 이미지별 .xmp 사이드카 |

### 선택 가이드

```
┌─────────────────────────────────────────────────────┐
│                                                      │
│  COLMAP 선택 (권장) ⭐                              │
│  ─────────────────────                              │
│  ├── 바로 사용 가능, 추가 계산 불필요               │
│  ├── Undistorted 이미지 제공                       │
│  ├── pycolmap으로 쉽게 로드                        │
│  └── NeRF, 3DGS 등 후속 작업에 표준                │
│                                                      │
│  XMP 선택                                           │
│  ──────────                                         │
│  ├── 원본 이미지 보존 필요 시                      │
│  ├── 왜곡 정보까지 필요한 경우                     │
│  └── 이미 XMP로 내보낸 데이터가 있을 때            │
│                                                      │
│  CSV 선택 (제한적)                                  │
│  ─────────────────                                  │
│  └── 외부 파라미터(위치, 방향)만 필요할 때         │
│      ⚠️ 내부 파라미터(fx, fy, cx, cy) 없음         │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### COLMAP 장점 상세

```
COLMAP Export 시 얻는 것:

┌─────────────────────────────────────────────────────┐
│                                                      │
│  sparse/0/                                          │
│  ├── cameras.txt                                   │
│  │   └── fx, fy, cx, cy, width, height             │
│  │       → 픽셀 단위로 바로 사용 가능              │
│  │                                                  │
│  ├── images.txt                                    │
│  │   └── quaternion (qw, qx, qy, qz), translation  │
│  │       → 회전/이동 행렬로 변환                   │
│  │                                                  │
│  └── points3D.txt                                  │
│      └── 희소 점군 (초기화용)                      │
│                                                      │
│  images/                                            │
│  └── Undistorted 이미지들 ⭐                       │
│      → 왜곡 보정 불필요                            │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### XMP 사용 시 추가 작업

```
XMP Export 시 필요한 추가 작업:

┌─────────────────────────────────────────────────────┐
│                                                      │
│  1. 이미지 해상도 별도 확인                         │
│     └── EXIF에서 읽거나 이미지 로드                │
│                                                      │
│  2. 초점거리 변환                                   │
│     └── FocalLength35mm → 픽셀 단위               │
│     └── fx = (focal_35mm / 36.0) * max_dim         │
│                                                      │
│  3. 왜곡 보정 (선택)                               │
│     └── DistortionCoeffs로 직접 undistort          │
│     └── 또는 원본 이미지 그대로 사용              │
│                                                      │
│  4. XML 파싱                                        │
│     └── 네임스페이스 처리 필요                    │
│     └── xcr:FocalLength35mm 등                    │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### 사용 사례별 추천

| 사용 사례 | 추천 형식 | 이유 |
|-----------|-----------|------|
| 2D→3D 좌표 변환 | COLMAP | Undistorted + 픽셀 단위 |
| NeRF 학습 | COLMAP | 표준 입력 형식 |
| 3DGS 학습 | COLMAP | 표준 입력 형식 |
| 원본 이미지 보존 | XMP | 사이드카 방식 |
| 기존 XMP 데이터 활용 | XMP | 재내보내기 불필요 |
| 위치/방향만 필요 | CSV | 가장 간단 |

### 요약

**결론**: 특별한 이유가 없으면 **COLMAP 형식**으로 내보내기.

- Undistorted 이미지 자동 생성
- 픽셀 단위 초점거리로 바로 사용
- 이미지 해상도 포함
- `pycolmap` 라이브러리로 쉽게 로드
- NeRF, 3DGS 등 후속 작업의 표준 입력

### 연결문서

- [[RealityScan]]
- [[COLMAP]]
- [[XMP]]
- [[3D Defect Mapping]]
- [[NeRF]]
- [[3DGS]]
- [[SfM]]
- [[dev-Freaktech-001-PoC 2D-3D Projection]]
